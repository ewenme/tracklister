(this.webpackJsonptracklister=this.webpackJsonptracklister||[]).push([[0],{103:function(t,e,a){},104:function(t,e,a){},106:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),c=a(55),o=a.n(c),l=a(62),i=a(6),s=a(7),u=a(9),m=a(8),p=a(10),d=a(61),k=a(57),b=a.n(k),f=function(t){var e=t.track_data.map((function(t,e){return n.a.createElement("li",{key:e},n.a.createElement("span",{className:"track-artist"},n.a.createElement("b",null,t.artist)," "),n.a.createElement("br",null),n.a.createElement("span",{className:"track-title"},n.a.createElement("small",null,t.track)))})),a=t.track_numbers?"decimal":"none";return n.a.createElement("ol",{style:{listStyleType:a}},e)},E=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={track_data:a.props.track_data,copied:!1},a.state=a.initialState,a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props,e=t.track_data,a=t.track_numbers;return n.a.createElement("div",{id:"tracklist"},n.a.createElement(f,{track_data:e,track_numbers:a}))}}]),e}(r.Component),h=a(58),O=a(21),g=a.n(O),v=function(){var t=Object(h.a)(!0);return n.a.createElement((function(t){var e=t.defaultChecked,a=t.onChange;return n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{id:"dark-status",defaultChecked:e,icons:!1,onChange:a}),n.a.createElement("label",{htmlFor:"dark-status"},"Dark mode"))}),{defaultChecked:t.value,onChange:t.toggle})},_=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={track_numbers:a.props.track_numbers},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{id:"track-no-status",defaultChecked:this.props.track_numbers,icons:!1,onChange:this.props.toggleTrackNumbers}),n.a.createElement("label",{htmlFor:"track-no-status"},"Track numbers"))}}]),e}(r.Component),T=a(60),j=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={copied:!1,track_numbers:a.props.track_numbers},a.state=a.initialState,a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t,e,a=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.CopyToClipboard,{text:(t=this.props.track_data,e=this.props.track_numbers,t.map((function(t,a){return e?a+1+". "+t.artist+" - "+t.track:t.artist+" - "+t.track})).join("\n")),onCopy:function(){return a.setState({copied:!0})}},n.a.createElement("button",{className:"square-button"},"Copy to clipboard")))}}]),e}(r.Component),L=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(u.a)(this,Object(m.a)(e).call(this))).state={acceptedFiles:[],track_data:[],track_numbers:!1},t.onDrop=function(e){e.forEach((function(e){var a=e.name.split(".").pop().toLowerCase();if("nml"===a){var r=new FileReader;r.onabort=function(){return console.log("file reading was aborted")},r.onerror=function(){return console.log("file reading has failed")},r.onload=function(){var e=r.result,a=new b.a.Parser;a.parseString(e);for(var n=a.resultObject,c=n.NML.COLLECTION[0].ENTRY,o=[],i=0;i<c.length;i++){var s=c[i].LOCATION[0].$;o.push({artist:c[i].$.ARTIST,track:c[i].$.TITLE,label:c[i].INFO[0].$.LABEL,location:s.VOLUME+s.DIR+s.FILE})}var u=n.NML.PLAYLISTS[0].NODE[0].SUBNODES[0].NODE[0].PLAYLIST[0].$.TYPE,m=n.NML.PLAYLISTS[0].NODE[0].SUBNODES[0].NODE[0].PLAYLIST[0].ENTRY,p=[];if("PROTOCOL"===u)for(var d=0;d<m.length;d++)p.push({location:m[d].PRIMARYKEY[0].$.KEY,track_no:d,played:m[d].EXTENDEDDATA[0].$.PLAYEDPUBLIC});else if("LIST"===u)for(var k=0;k<m.length;k++)p.push({location:m[k].PRIMARYKEY[0].$.KEY,track_no:k,played:"1"});var f=Object(l.a)(o.concat(p).reduce((function(t,e){return t.set(e.location,Object.assign(t.get(e.location)||{},e))}),new Map).values());f.sort((function(t,e){return parseFloat(t.track_no)-parseFloat(e.track_no)}));var E=f.filter((function(t){return"1"===t.played}));t.setState({track_data:E})},r.readAsText(e)}else if("txt"===a){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=n.result.split("\n").map((function(t){return t.split("\t")})).filter((function(t){return 11===t.length}));e.shift();for(var a=[],r=0;r<e.length;r++)a.push({artist:e[r][3],track:e[r][2],track_no:r});t.setState({track_data:a})},n.readAsText(e)}})),t.setState({acceptedFiles:e})},t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"toggleTrackNumbers",value:function(){this.setState({track_numbers:!this.state.track_numbers})}},{key:"render",value:function(){var t=this,e=this.state,a=e.track_data,r=e.track_numbers;return n.a.createElement("div",{className:"container"},n.a.createElement(d.a,{onDrop:this.onDrop,accept:".nml, .txt",multiple:!1},(function(e){var c=e.getRootProps,o=e.getInputProps,l=e.isDragActive;return n.a.createElement("section",null,n.a.createElement("div",c({className:"dropzone"}),n.a.createElement("input",o()),l?"stop, drop!":"click here or drag a file to upload"),n.a.createElement(_,{track_numbers:t.state.track_numbers,toggleTrackNumbers:t.toggleTrackNumbers.bind(t)}),n.a.createElement(v,null),n.a.createElement(j,{track_data:a,track_numbers:r}))})),n.a.createElement(E,{track_data:a,track_numbers:r}))}}]),e}(r.Component);a(103),a(104),a(105);o.a.render(n.a.createElement(L,null),document.getElementById("root"))},63:function(t,e,a){t.exports=a(106)},84:function(t,e){},86:function(t,e){}},[[63,1,2]]]);
//# sourceMappingURL=main.f4cd6431.chunk.js.map