(this.webpackJsonptracklister=this.webpackJsonptracklister||[]).push([[0],{103:function(t,e,a){},104:function(t,e,a){},106:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),c=a(55),o=a.n(c),l=a(62),s=a(6),i=a(7),u=a(9),m=a(8),k=a(10),p=a(61),b=a(57),d=a.n(b),E=function(t){var e=t.track_data.map((function(t,e){return n.a.createElement("li",{key:e},n.a.createElement("span",{class:"track-artist"},n.a.createElement("b",null,t.artist)," "),n.a.createElement("br",null),n.a.createElement("span",{class:"track-title"},n.a.createElement("small",null,t.track)))})),a=t.track_numbers?"decimal":"none";return n.a.createElement("ol",{style:{listStyleType:a}},e)},f=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={track_data:a.props.track_data,copied:!1},a.state=a.initialState,a}return Object(k.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props,e=t.track_data,a=t.track_numbers;return n.a.createElement("div",{id:"tracklist"},n.a.createElement(E,{track_data:e,track_numbers:a}))}}]),e}(r.Component),h=a(58),O=a(21),g=a.n(O),v=function(){var t=Object(h.a)(!0);return n.a.createElement((function(t){var e=t.defaultChecked,a=t.onChange;return n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{id:"dark-status",defaultChecked:e,icons:!1,onChange:a}),n.a.createElement("label",{htmlFor:"dark-status"},"Dark mode"))}),{defaultChecked:t.value,onChange:t.toggle})},_=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={track_numbers:a.props.track_numbers},a}return Object(k.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{id:"track-no-status",defaultChecked:this.props.track_numbers,icons:!1,onChange:this.props.toggleTrackNumbers}),n.a.createElement("label",{htmlFor:"track-no-status"},"Track numbers"))}}]),e}(r.Component),j=a(60),T=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={copied:!1,track_numbers:a.props.track_numbers},a.state=a.initialState,a}return Object(k.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t,e,a=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(j.CopyToClipboard,{text:(t=this.props.track_data,e=this.props.track_numbers,t.map((function(t,a){return e?a+1+". "+t.artist+" - "+t.track:t.artist+" - "+t.track})).join("\n")),onCopy:function(){return a.setState({copied:!0})}},n.a.createElement("button",{class:"square-button"},"Copy to clipboard")))}}]),e}(r.Component),L=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(u.a)(this,Object(m.a)(e).call(this))).state={acceptedFiles:[],track_data:[],track_numbers:!1},t.onDrop=function(e){e.forEach((function(e){var a=new FileReader;a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading has failed")},a.onload=function(){var e=a.result,r=new d.a.Parser;r.parseString(e);for(var n=r.resultObject,c=n.NML.COLLECTION[0].ENTRY,o=[],s=0;s<c.length;s++){var i=c[s].LOCATION[0].$;o.push({artist:c[s].$.ARTIST,track:c[s].$.TITLE,label:c[s].INFO[0].$.LABEL,location:i.VOLUME+i.DIR+i.FILE})}var u=n.NML.PLAYLISTS[0].NODE[0].SUBNODES[0].NODE[0].PLAYLIST[0].$.TYPE,m=n.NML.PLAYLISTS[0].NODE[0].SUBNODES[0].NODE[0].PLAYLIST[0].ENTRY,k=[];if("PROTOCOL"===u)for(var p=0;p<m.length;p++)k.push({location:m[p].PRIMARYKEY[0].$.KEY,track_no:p,played:m[p].EXTENDEDDATA[0].$.PLAYEDPUBLIC});else if("LIST"===u)for(var b=0;b<m.length;b++)k.push({location:m[b].PRIMARYKEY[0].$.KEY,track_no:b,played:"1"});var E=Object(l.a)(o.concat(k).reduce((function(t,e){return t.set(e.location,Object.assign(t.get(e.location)||{},e))}),new Map).values());E.sort((function(t,e){return parseFloat(t.track_no)-parseFloat(e.track_no)}));var f=E.filter((function(t){return"1"===t.played}));t.setState({track_data:f})},a.readAsText(e)})),t.setState({acceptedFiles:e})},t}return Object(k.a)(e,t),Object(i.a)(e,[{key:"toggleTrackNumbers",value:function(){this.setState({track_numbers:!this.state.track_numbers})}},{key:"render",value:function(){var t=this,e=this.state,a=e.track_data,r=e.track_numbers;return n.a.createElement("div",{className:"container"},n.a.createElement(p.a,{onDrop:this.onDrop,accept:".nml",multiple:!1},(function(e){var c=e.getRootProps,o=e.getInputProps,l=e.isDragActive;return n.a.createElement("section",null,n.a.createElement("div",c({className:"dropzone"}),n.a.createElement("input",o()),l?"stop, drop!":"click here or drag a file to upload"),n.a.createElement(_,{track_numbers:t.state.track_numbers,toggleTrackNumbers:t.toggleTrackNumbers.bind(t)}),n.a.createElement(v,null),n.a.createElement(T,{track_data:a,track_numbers:r}))})),n.a.createElement(f,{track_data:a,track_numbers:r}))}}]),e}(r.Component);a(103),a(104),a(105);o.a.render(n.a.createElement(L,null),document.getElementById("root"))},63:function(t,e,a){t.exports=a(106)},84:function(t,e){},86:function(t,e){}},[[63,1,2]]]);
//# sourceMappingURL=main.187c149d.chunk.js.map