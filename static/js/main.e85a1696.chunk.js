(this.webpackJsonptracklister=this.webpackJsonptracklister||[]).push([[0],{105:function(t,e,a){},106:function(t,e,a){},108:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(55),o=a.n(c),l=a(64),i=a(5),s=a(6),u=a(8),m=a(7),p=a(9),d=a(63),k=a(57),b=a.n(k),f=function(t){var e=t.track_data.map((function(t,e){return r.a.createElement("li",{key:e},r.a.createElement("span",{className:"track-artist"},r.a.createElement("b",null,t.artist)," "),r.a.createElement("br",null),r.a.createElement("span",{className:"track-title"},r.a.createElement("small",null,t.track)))})),a=t.track_numbers?"decimal":"none";return r.a.createElement("ol",{style:{listStyleType:a}},e)},E=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={track_data:a.props.track_data,copied:!1},a.state=a.initialState,a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props,e=t.track_data,a=t.track_numbers;return r.a.createElement("div",{id:"tracklist"},r.a.createElement(f,{track_data:e,track_numbers:a}))}}]),e}(n.Component),h=a(58),O=a(21),g=a.n(O),v=function(){var t=Object(h.a)(!0);return r.a.createElement((function(t){var e=t.defaultChecked,a=t.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{id:"dark-status",defaultChecked:e,icons:!1,onChange:a}),r.a.createElement("label",{htmlFor:"dark-status"},"dark mode"))}),{defaultChecked:t.value,onChange:t.toggle})},_=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={track_numbers:a.props.track_numbers},a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{id:"track-no-status",defaultChecked:this.props.track_numbers,icons:!1,onChange:this.props.toggleTrackNumbers}),r.a.createElement("label",{htmlFor:"track-no-status"},"track numbers"))}}]),e}(n.Component),j=a(60),N=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(u.a)(this,Object(m.a)(e).call(this,t))).initialState={copied:!1,track_numbers:a.props.track_numbers},a.state=a.initialState,a}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t,e,a=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.CopyToClipboard,{text:(t=this.props.track_data,e=this.props.track_numbers,t.map((function(t,a){return e?a+1+". "+t.artist+" - "+t.track:t.artist+" - "+t.track})).join("\n")),onCopy:function(){return a.setState({copied:!0})}},r.a.createElement("button",{className:"muted-button"},"copy to clipboard")))}}]),e}(n.Component),T=a(61),L=a.n(T),S=a(62),C=a.n(S),y=function(t){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"printDocument",value:function(){var t=document.getElementById("tracklist");L.a.toBlob(t).then((function(t){C.a.saveAs(t,"my-tracklist.png")}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"muted-button",onClick:this.printDocument},"take a screenshot"))}}]),e}(n.Component),I=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(u.a)(this,Object(m.a)(e).call(this))).state={acceptedFiles:[],track_data:[],track_numbers:!0},t.onDrop=function(e){e.forEach((function(e){var a=e.name.split(".").pop().toLowerCase();if("nml"===a){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=n.result,a=new b.a.Parser;a.parseString(e);for(var r=a.resultObject,c=r.NML.COLLECTION[0].ENTRY,o=[],i=0;i<c.length;i++){var s=c[i].LOCATION[0].$;o.push({artist:c[i].$.ARTIST,track:c[i].$.TITLE,label:c[i].INFO[0].$.LABEL,location:s.VOLUME+s.DIR+s.FILE})}var u=r.NML.PLAYLISTS[0].NODE[0].SUBNODES[0].NODE[0].PLAYLIST[0].$.TYPE,m=r.NML.PLAYLISTS[0].NODE[0].SUBNODES[0].NODE[0].PLAYLIST[0].ENTRY,p=[];if("PROTOCOL"===u)for(var d=0;d<m.length;d++)p.push({location:m[d].PRIMARYKEY[0].$.KEY,track_no:d,played:m[d].EXTENDEDDATA[0].$.PLAYEDPUBLIC});else if("LIST"===u)for(var k=0;k<m.length;k++)p.push({location:m[k].PRIMARYKEY[0].$.KEY,track_no:k,played:"1"});var f=Object(l.a)(o.concat(p).reduce((function(t,e){return t.set(e.location,Object.assign(t.get(e.location)||{},e))}),new Map).values());f.sort((function(t,e){return parseFloat(t.track_no)-parseFloat(e.track_no)}));var E=f.filter((function(t){return"1"===t.played}));t.setState({track_data:E})},n.readAsText(e)}else if("txt"===a){var r=new FileReader;r.onabort=function(){return console.log("file reading was aborted")},r.onerror=function(){return console.log("file reading has failed")},r.onload=function(){var e=r.result.split("\n").map((function(t){return t.split("\t")})).filter((function(t){return 11===t.length}));e.shift();for(var a=[],n=0;n<e.length;n++)a.push({artist:e[n][3],track:e[n][2],track_no:n});t.setState({track_data:a})},r.readAsText(e)}})),t.setState({acceptedFiles:e})},t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"toggleTrackNumbers",value:function(){this.setState({track_numbers:!this.state.track_numbers})}},{key:"render",value:function(){var t=this,e=this.state,a=e.track_data,n=e.track_numbers;return r.a.createElement("div",{className:"container"},r.a.createElement(d.a,{onDrop:this.onDrop,accept:".nml, .txt",multiple:!1},(function(e){var c=e.getRootProps,o=e.getInputProps,l=e.isDragActive;return r.a.createElement("section",null,r.a.createElement("div",c({className:"dropzone"}),r.a.createElement("input",o()),l?"stop, drop!":"click here or drag a file to upload"),r.a.createElement(_,{track_numbers:t.state.track_numbers,toggleTrackNumbers:t.toggleTrackNumbers.bind(t)}),r.a.createElement(v,null),r.a.createElement(N,{track_data:a,track_numbers:n}),r.a.createElement(y,null))})),r.a.createElement(E,{track_data:a,track_numbers:n}))}}]),e}(n.Component);a(105),a(106),a(107);o.a.render(r.a.createElement(I,null),document.getElementById("root"))},65:function(t,e,a){t.exports=a(108)},86:function(t,e){},88:function(t,e){}},[[65,1,2]]]);
//# sourceMappingURL=main.e85a1696.chunk.js.map